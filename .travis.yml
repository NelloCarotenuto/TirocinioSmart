dist: trusty

sudo: required

language: java

jdk: oraclejdk8

cache:
  directories:
  - $HOME/.m2

services:
  - mysql

addons:
  apt:
    sources:
      - mysql-5.7-trusty
    packages:
      - mysql-server

before_script:
 - sudo mysql -e "USE mysql; UPDATE USER SET authentication_string=PASSWORD('root') WHERE user='root'; UPDATE user SET plugin='mysql_native_password'; FLUSH PRIVILEGES;"
 - mysql -e 'CREATE DATABASE tirociniosmart;'
 - cd webapp

script: ./mvnw clean install spring-boot:repackage